# Test Mode (set to "true" to enable simulation mode - no real orders will be placed)
TEST_MODE=true

# WebSocket连接设置（新增）
WEBSOCKET_RECONNECT_DELAY=3000          # WebSocket重连延迟（毫秒）
WEBSOCKET_MAX_RECONNECTS=10             # 最大重连次数
DEBUG_WEBSOCKET=true                    # 启用WebSocket调试日志

# Core trading symbol and sizing
TRADE_SYMBOL=ASTERUSDT                  # Trading pair symbol (切换回ASTERUSDT)
TRADE_AMOUNT=20                         # 基础订单数量 (20 ASTER × $1.85 = $37.0总价值)

# Risk management (USD amounts unless noted) - 针对ASTER $1.85价格优化
# 注意：当ENABLE_DYNAMIC_RISK=true时，以下静态参数将被忽略，系统将根据价格动态计算
LOSS_LIMIT=0.37                         # 每笔交易最大亏损 (仅在动态风险管理禁用时生效)
TRAILING_PROFIT=0.74                    # 追踪止盈激活利润 (仅在动态风险管理禁用时生效)
TRAILING_CALLBACK_RATE=0.8              # 追踪回调百分比 (始终生效)
PROFIT_LOCK_TRIGGER_USD=0.56            # 开始移动基础止损的未实现盈亏触发点 (仅在动态风险管理禁用时生效)
PROFIT_LOCK_OFFSET_USD=0.19              # 触发后基础止损距离入场价的偏移 (仅在动态风险管理禁用时生效)

# Precision (per-symbol exchange filters) - ASTER适用精度

PRICE_TICK=0.001                        # 价格最小变动单位 (ASTER通常为0.001)
QTY_STEP=0.1                           # 数量最小步长 (ASTER通常为0.1)

# Engine cadence and UI - 针对震荡行情优化
POLL_INTERVAL_MS=500                     # 趋势引擎轮询间隔 (提高反应速度，增加交易频率)
MAX_LOG_ENTRIES=300                      # 仪表板显示的最大日志条目
KLINE_INTERVAL=1m                        # K线间隔 (1分钟适合捕捉震荡)
MAX_CLOSE_SLIPPAGE_PCT=0.03              # 平仓时允许的最大偏差vs标记价格 (放宽滑点，提高成交率)

# Maker-only settings - ASTER做市策略优化
MAKER_LOSS_LIMIT=0.25                   # 做市商亏损上限 (降低止损线提高风险控制)
MAKER_PROFIT_TARGET=0.50                # 做市商止盈目标 (适中的止盈目标，保证盈亏比2:1)
MAKER_PRICE_CHASE=0.0019                # 价格追逐阈值 ($1.85 × 0.1% ≈ 0.0019)
MAKER_BID_OFFSET=0.0009                 # 买单相对最高买价的偏移 (约0.05%价差)
MAKER_ASK_OFFSET=0.0009                 # 卖单相对最低卖价的偏移 (保持对称)
MAKER_REFRESH_INTERVAL_MS=800           # 做市商刷新频率
MAKER_MAX_CLOSE_SLIPPAGE_PCT=0.025      # 做市商平仓滑点保护
MAKER_PRICE_TICK=0.001                  # 做市商价格最小变动单位 (ASTER适用)

# Fee monitoring settings - 根据$37.0仓位调整
FEE_RATE=0.0004                         # 交易手续费率 (0.04%)
MAX_DAILY_FEE_PCT=2.5                   # 每日最大手续费占总资金百分比
MAX_HOURLY_FEE_PCT=0.8                  # 每小时最大手续费占总资金百分比
FEE_WARNING_THRESHOLD=1.8               # 手续费警告阈值 (适合震荡交易频率)
ENABLE_FEE_PROTECTION=true              # 启用手续费保护

# Fee tracking and logging
LOG_FEE_SUMMARY_INTERVAL=300000         # 手续费汇总日志间隔 (5分钟)
RESET_FEE_COUNTER_HOUR=0                # 每日重置手续费计数器的小时 (0-23)

# Dynamic Risk Management - 动态风险管理
ENABLE_DYNAMIC_RISK=true                # 启用动态风险管理 (启用后将忽略上述静态风险参数)
DYNAMIC_RISK_THRESHOLD=0.015             # 价格变化阈值 (1.5%变化时重新计算参数，提高敏感度)
RISK_PERCENTAGE=0.0075                   # 基础风险百分比 (0.75% 止损，更紧密的止损距离)
PROFIT_TARGET_PERCENTAGE=0.015           # 基础目标收益百分比 (1.5% 止盈，2:1盈亏比)

# 贪婪止盈策略 - Greedy Take Profit Strategy
ENABLE_GREEDY_TAKE_PROFIT=true           # 启用贪婪止盈 (到达基础止盈后继续等待更高收益)
GREEDY_SAMPLE_SIZE=10                    # 价格采样数组大小 (记录最近10次价格)
GREEDY_REVERSAL_THRESHOLD=0.002          # 反转阈值 (价格反转0.2%时止盈)
GREEDY_MAX_WAIT_TIME_MS=30000           # 贪婪模式最大等待时间 (30秒，防止无限等待)
GREEDY_EXTRA_PROFIT_TARGET=0.005         # 额外收益目标 (在基础1.5%上再等待0.5%)

# Redis配置 - Redis Configuration
REDIS_HOST=localhost                     # Redis服务器地址
REDIS_PORT=6379                          # Redis端口
REDIS_PASSWORD=                          # Redis密码（可选）
REDIS_CACHE_TTL=3600                     # 缓存过期时间（秒）
REDIS_MAX_KLINES=200                     # 最大K线数量

# 增强技术分析配置 - Enhanced Technical Analysis
ENABLE_ENHANCED_ANALYSIS=false           # 启用增强技术分析
KDJ_PERIOD=14                            # KDJ指标周期
RSI_PERIOD=14                            # RSI指标周期
VOLUME_MA_PERIOD=20                      # 成交量移动平均周期
CONFIDENCE_THRESHOLD=0.7                 # 信号置信度阈值（0-1）
PRICE_RANGE_HOURS=3                      # 价格区间分析小时数
VOLATILITY_PERIOD=20                     # 波动性计算周期
MIN_VOLUME_RATIO=0.8                     # 最小成交量比率确认

# 高频交易优化 - 提高交易总量（更激进的贴近市价策略）
TRAILING_PROFIT_PERCENTAGE=0.008         # 追踪止盈百分比 (0.8%，适配新的1.5%止盈目标)
PROFIT_LOCK_TRIGGER_PERCENTAGE=0.012     # 利润锁定触发百分比 (1.2%，约为止盈目标的80%)
PROFIT_LOCK_OFFSET_PERCENTAGE=0.003      # 利润锁定偏移百分比 (0.3%，更紧密的偏移)
MIN_POSITION_HOLD_TIME_MS=800           # 最小持仓时间 (0.8秒，更快响应)
MAX_POSITION_SIZE_MULTIPLIER=1.3        # 最大仓位倍数 (提高到1.3倍)

# 贴近市价参数优化
MARKET_PRICE_OFFSET_PCT=0.005           # 市价偏移百分比 (0.5%，适配0.75%止损)
ACTIVATION_PRICE_OFFSET_PCT=0.008       # 激活价格偏移百分比 (0.8%，适配紧密的风险参数)